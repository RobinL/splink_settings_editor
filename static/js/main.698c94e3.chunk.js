(this["webpackJsonpmy-create-react-app"]=this["webpackJsonpmy-create-react-app"]||[]).push([[1],{378:function(e,t,n){e.exports=n(679)},383:function(e,t,n){},384:function(e,t,n){},558:function(e,t,n){var a={"./id_1.md":[740,67],"./id_2.md":[741,68],"./id_3.md":[742,69],"./id_4.md":[743,70],"./id_5.md":[744,71]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,7)}))}o.keys=function(){return Object.keys(a)},o.id=558,e.exports=o},679:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n.n(a),r=n(158),i=n.n(r),s=(n(383),n(125)),l=n(126),c=n(205),u=n(129),m=n(127),p=(n(384),n(218)),_=function(e){return o.a.createElement("div",{id:"editor-container",style:{width:"700px"}})},d=function(e){return 0===e.errors.length?o.a.createElement("div",{style:{background:"#bcfbb8"}},"The above settings object is VALID"):o.a.createElement("div",{style:{background:"#fbb8b8"}},"The above settings object contains the following errors:",e.errors.map((function(e){return o.a.createElement("li",null,e)})))},h=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={errors:[]},e.prevHeight=0,e.updateEditorHeight=function(){var t,n=e.editor.getDomNode();if(n){var a=e.editor.getOption(p.editor.EditorOption.lineHeight),o=(null===(t=e.editor.getModel())||void 0===t?void 0:t.getLineCount())||1,r=e.editor.getTopForLineNumber(o+1)+a;e.prevHeight!==r&&(e.prevHeight=r,n.style.height="".concat(r,"px"),e.editor.layout())}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t="https://raw.githubusercontent.com/moj-analytical-services/splink/master/splink/files/settings_jsonschema.json";fetch(t).then((function(e){return e.json()})).then((function(n){var a=n,o=e.props.editor_contents_string;e.monaco=p;var r=e.monaco.Uri.parse("a://b/foo.json"),i=e.monaco.editor.createModel(o,"json",r);e.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:t,fileMatch:[r.toString()],schema:a}]}),e.editor=e.monaco.editor.create(document.getElementById("editor-container"),{value:o,automaticLayout:!1,language:"json",model:i,wordWrap:"on",scrollbar:{vertical:"hidden",handleMouseWheel:!1},scrollBeyondLastLine:!1,minimap:{enabled:!1},theme:"vs-dark",insertSpaces:!0}),e.model=i,e.editor.onDidChangeModelDecorations((function(){var t=e.editor.getModel();e.updateEditorHeight();var n=t.getModeId(),a=p.editor.getModelMarkers({owner:n}),o=[];a.forEach((function(e){var t=e.message,n=e.startLineNumber;t="Error: ".concat(t," at line ").concat(n),o.push(t)})),e.setState({errors:o})}))}))}},{key:"componentDidUpdate",value:function(e){e.option_selection!==this.props.option_selection&&this.editor.setValue(this.props.editor_contents_string)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,"You can use ctrl+space to autocomplete fields, and ctrl+shift+f to format the document"),o.a.createElement("p",null,"Hover over fields to get a description of their purpose"),o.a.createElement(_,{className:"monaco-window"}),o.a.createElement(d,{errors:this.state.errors}))}}]),n}(o.a.Component),f=n(217),v=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderOption",value:function(e,t){var n=t[e].example_name;return o.a.createElement("option",{key:e,value:e},n)}},{key:"render",value:function(){var e=this.props.all_example_settings,t=Object.keys(this.props.all_example_settings).map((function(t){return{value:t,label:e[t].example_name}})),n=this.props.selected_option,a={value:n,label:e[n].example_name};return o.a.createElement("div",null,o.a.createElement(f.a,{options:t,onChange:this.props.onChange,value:a}))}}]),n}(a.Component),b=n(194),g=n.n(b),y=n(339),E=n(216),k=n.n(E),j={id_4:{settings_id:"id_4",example_name:"Example 4: Manually computing match probabilities with no iterations",settings_dictionary:{link_type:"dedupe_only",proportion_of_matches:.2,blocking_rules:["l.surname = r.surname"],max_iterations:0,comparison_columns:[{col_name:"first_name",num_levels:2,m_probabilities:[.05,.2,.75],u_probabilities:[.9,.08,.02]},{col_name:"social_security_number",m_probabilities:[.02,.98],u_probabilities:[.99,.01]}]}},id_3:{settings_id:"id_3",example_name:"Example 3: Starting parameters",settings_dictionary:{link_type:"dedupe_only",proportion_of_matches:.2,blocking_rules:["l.surname = r.surname"],comparison_columns:[{col_name:"first_name",num_levels:3,m_probabilities:[.05,.2,.75],u_probabilities:[.9,.08,.02]},{col_name:"social_security_number",m_probabilities:[.02,.98],u_probabilities:[.99,.01]}]}},id_2:{settings_id:"id_2",example_name:"Example 2: Forename/surname invesrion",settings_dictionary:{link_type:"dedupe_only",comparison_columns:[{custom_name:"name_inversion_forname",custom_columns_used:["forename","surname"],case_expression:"CASE \nWHEN forename_l is null or forename_r is null then -1\nWHEN jaro_winkler(forename_l, forename_r) < 0.94 then 3\nWHEN jaro_winkler(forename_l, forename_r) < 0.88 then 2\nWHEN jaro_winkler(surname_l, forename_r) < 0.94 or jaro_winkler(surname_r, forename_l) < 0.94 then 1\nELSE 0\nEND ",num_levels:4},{custom_name:"name_inversion_surname",custom_columns_used:["forename","surname"],case_expression:"CASE \nWHEN surname_l is null or surname_r is null then -1\nWHEN jaro_winkler(surname_l, surname_r) < 0.94 then 3\nWHEN jaro_winkler(surname_l, surname_r) < 0.88 then 2\nWHEN jaro_winkler(forename_l, surname_r) < 0.94 or jaro_winkler(surname_r, forename_l) < 0.94 then 1\nELSE 0\nEND ",num_levels:4},{col_name:"other_columns"}]}},id_5:{settings_id:"id_5",example_name:"Example 5: Controlling convergence and the number of iterations",settings_dictionary:{link_type:"dedupe_only",blocking_rules:["l.surname = r.surname"],max_iterations:100,em_convergence:1e-4,comparison_columns:[{col_name:"first_name"},{col_name:"surname"}]}},id_1:{settings_id:"id_1",example_name:"Example 1: Basic dedupe template",settings_dictionary:{link_type:"dedupe_only",blocking_rules:["l.first_name = r.first_name","l.surname = r.surname","l.dob = r.dob"],comparison_columns:[{col_name:"first_name",num_levels:3,term_frequency_adjustments:!0},{col_name:"surname",num_levels:3,term_frequency_adjustments:!0},{col_name:"dob"},{col_name:"city"},{col_name:"email"}],additional_columns_to_retain:["group"]}}},x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={md:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._loadAsyncData(this.props.select_id);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===this.state.md&&this._loadAsyncData(this.props.select_id);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,j[this.props.select_id].example_name),o.a.createElement(k.a,{source:this.state.md}))}},{key:"_loadAsyncData",value:function(e){var t=this;this._asyncRequest=n(558)("./".concat(e,".md")).then((function(e){return fetch(e.default)})).then((function(e){return e.text()})).then((function(e){t._asyncRequest=null,t.setState({md:e})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.select_id!==t.prev_select_id?{md:null,prev_select_id:e.select_id}:null}}]),a}(o.a.Component);var O=function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"splink settings examples and editor"),o.a.createElement("p",null,"Use the editor below to create a ",o.a.createElement("code",null,"splink")," settings dictionary, or load one of our examples:"))},w=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={schema:null,selected_option:null},e.handleChange=function(t){var n=e.state.schema;e.setState({schema:n,selected_option:t})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://raw.githubusercontent.com/moj-analytical-services/splink/master/splink/files/settings_jsonschema.json").then((function(e){return e.json()})).then((function(t){e.schema=t,e.setState({selected_option:null})}))}},{key:"schemaToOptions",value:function(){if(!this.schema)return[];var e=Object.keys(this.schema.properties),t=(e=(e=e.filter((function(e){return"$schema"!==e}))).filter((function(e){return"$id"!==e}))).map((function(e){return{label:e,value:e,is_comparison_col:!1}})),n=(e=(e=(e=Object.keys(this.schema.properties.comparison_columns.items.properties)).filter((function(e){return"$schema"!==e}))).filter((function(e){return"$id"!==e}))).map((function(e){return{label:e,value:e,is_comparison_col:!0}}));return t.concat(n)}},{key:"optionToSchemaSection",value:function(){if(!this.schema)return{};var e=this.state.selected_option;return e.is_comparison_col?this.schema.properties.comparison_columns.items.properties[e.value]:this.schema.properties[e.value]}},{key:"markdownFromSchemaSection",value:function(e){var t=this.state.selected_option.is_comparison_col,n=this.state.selected_option.value,a=[];if("title"in e&&a.push("**Summary**: ".concat(e.title)),"description"in e&&a.push("**Description**: ".concat(e.description)),"default"in e&&a.push("**Default value if not provided**: ".concat(e.default)),"type"in e&&a.push("**Data type**: ".concat(e.type)),"enum"in e){var o=e.enum.join(", ");a.push("**Takes one of the following values**: ".concat(o))}if("examples"in e){var r="";"string"===e.type&&(r='"');var i=[];t?(i.push("settings = {"),i.push('    "comparison_columns": ['),i.push("        {"),i.push('    "'.concat(n,'": ').concat(r).concat(e.examples[0]).concat(r)),i.push("        }"),i.push("    ]"),i.push("}"),i=i.join("\n")):(i.push("settings = {"),i.push('    "'.concat(n,'": ').concat(r).concat(e.examples[0]).concat(r)),i.push("}"),i=i.join("\n")),a.push("**Example**: \n  ```` \n ".concat(i,"  \n ```` "))}return a.join("\n\n")}},{key:"render",value:function(){var e=this.schemaToOptions(),t="";if(this.state.selected_option){var n=this.optionToSchemaSection();t=this.markdownFromSchemaSection(n)}return o.a.createElement("div",null,o.a.createElement("h2",null,"Setting dictionary key explorer"),o.a.createElement("p",null,"Select a key from the box below for further details about what it does"),o.a.createElement(f.a,{options:e,value:this.state.selected_option,onChange:this.handleChange}),o.a.createElement("br",null),o.a.createElement(k.a,{source:t}))}}]),n}(o.a.Component),S=n(374),C=n.n(S),D=n(375),N=n.n(D),H=n(376),M=N.a,A=new C.a(M);A.injectStyles(),Object(H.a)(A);var T=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={option_selection:"id_1"},a.handleChange=function(e){var t=e.value;a.setState({option_selection:t})},a.handleChange=a.handleChange.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"getTextFromId",value:function(e){var t=j[e].settings_dictionary;return JSON.stringify(t,null,4)}},{key:"render",value:function(){var e=this.getTextFromId(this.state.option_selection);return o.a.createElement("div",{className:"App-main-div"},o.a.createElement(O,null),o.a.createElement(v,{onChange:this.handleChange,all_example_settings:j,selected_option:this.state.option_selection}),o.a.createElement("div",{className:"App-flex-container"},o.a.createElement("div",{className:"App-flex-item"},o.a.createElement("h2",null,"Code editor"),o.a.createElement(h,{editor_contents_string:e,option_selection:this.state.option_selection})),o.a.createElement("div",{className:"App-flex-item"},o.a.createElement(x,{select_id:this.state.option_selection}))),o.a.createElement(w,null))}}]),n}(o.a.Component);i.a.render(o.a.createElement(T,null),document.getElementById("root"))}},[[378,2,3]]]);
//# sourceMappingURL=main.698c94e3.chunk.js.map