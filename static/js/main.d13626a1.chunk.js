(this["webpackJsonpmy-create-react-app"]=this["webpackJsonpmy-create-react-app"]||[]).push([[1],{322:function(e,t,n){e.exports=n(491)},327:function(e,t,n){},328:function(e,t,n){},487:function(e,t,n){var a={"./id_1.md":[552,67],"./id_2.md":[553,68]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n.t(r,7)}))}r.keys=function(){return Object.keys(a)},r.id=487,e.exports=r},491:function(e,t,n){"use strict";n.r(t);var a=n(40),r=n.n(a),o=n(316),i=n.n(o),s=(n(327),n(137)),l=n(138),c=n(145),u=n(139),d=n(188),p=n(146),m=(n(328),n(199)),h=function(e){return r.a.createElement("div",{id:"editor-container",style:{width:"700px"}})},f=function(e){return 0===e.errors.length?r.a.createElement("div",{style:{background:"#bcfbb8"}},"The above settings object is VALID"):r.a.createElement("div",{style:{background:"#fbb8b8"}},"The above settings object contains the following errors:",e.errors.map((function(e){return r.a.createElement("li",null,e)})))},_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={errors:[]},n.prevHeight=0,n.updateEditorHeight=function(){var e,t=n.editor.getDomNode();if(t){var a=n.editor.getOption(m.editor.EditorOption.lineHeight),r=(null===(e=n.editor.getModel())||void 0===e?void 0:e.getLineCount())||1,o=n.editor.getTopForLineNumber(r+1)+a;n.prevHeight!==o&&(n.prevHeight=o,t.style.height="".concat(o,"px"),n.editor.layout())}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="https://raw.githubusercontent.com/moj-analytical-services/splink/master/splink/files/settings_jsonschema.json";fetch(t).then((function(e){return e.json()})).then((function(n){var a=n,r=e.props.editor_contents_string;e.monaco=m;var o=e.monaco.Uri.parse("a://b/foo.json"),i=e.monaco.editor.createModel(r,"json",o);e.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:t,fileMatch:[o.toString()],schema:a}]}),e.editor=e.monaco.editor.create(document.getElementById("editor-container"),{value:r,automaticLayout:!1,language:"json",model:i,scrollbar:{vertical:"hidden",handleMouseWheel:!1},scrollBeyondLastLine:!1,minimap:{enabled:!1},theme:"vs-dark",insertSpaces:!0}),e.model=i,e.editor.onDidChangeModelDecorations((function(){var t=e.editor.getModel();e.updateEditorHeight();var n=t.getModeId(),a=m.editor.getModelMarkers({owner:n}),r=[];a.forEach((function(e){var t=e.message,n=e.startLineNumber;t="Error: ".concat(t," at line ").concat(n),r.push(t)})),e.setState({errors:r})}))}))}},{key:"componentDidUpdate",value:function(e){e.option_selection!==this.props.option_selection&&this.editor.setValue(this.props.editor_contents_string)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"You can use ctrl+space to autocomplete fields, and ctrl+shift+f to format the document"),r.a.createElement("p",null,"Hover over fields to get a description of their purpose"),r.a.createElement(h,{className:"monaco-window"}),r.a.createElement(f,{errors:this.state.errors}))}}]),t}(r.a.Component),v=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderOption",value:function(e,t){var n=t[e].example_name;return r.a.createElement("option",{key:e,value:e},n)}},{key:"render",value:function(){var e=this,t=this.props.all_example_settings,n=Object.keys(this.props.all_example_settings);return r.a.createElement("div",null,r.a.createElement("select",{onChange:this.props.onChange,defaultValue:this.props.selected_option},n.map((function(n){return e.renderOption(n,t)}))))}}]),t}(a.Component),g=n(185),b=n.n(g),y=n(303),j=n(317),E=n.n(j),O=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={md:null},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._loadAsyncData(this.props.select_id);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===this.state.md&&this._loadAsyncData(this.props.select_id);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,{source:this.state.md}),r.a.createElement("p",null,"Notes:"),r.a.createElement("p",null,"Where the user does not explicitly provide settings, splink will fall back on sensible default values."))}},{key:"_loadAsyncData",value:function(e){var t=this;this._asyncRequest=n(487)("./".concat(e,".md")).then((function(e){return fetch(e.default)})).then((function(e){return e.text()})).then((function(e){t._asyncRequest=null,t.setState({md:e})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.select_id!==t.prev_select_id?{md:null,prev_select_id:e.select_id}:null}}]),t}(r.a.Component);var k=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"splink settings examples and editor"),r.a.createElement("p",null,"Use the editor below to create a ",r.a.createElement("code",null,"splink")," settings dictionary, or load one of our examples:"))},x={id_2:{settings_id:"id_2",example_name:"example 2",settings_dictionary:{link_type:"link_only"}},id_1:{settings_id:"id_1",example_name:"Example 1: Basic dedupe template",settings_dictionary:{comparison_columns:[{num_levels:3,term_frequency_adjustments:!0,col_name:"first_name"},{num_levels:3,term_frequency_adjustments:!0,col_name:"surname"},{col_name:"dob"},{col_name:"city"},{col_name:"email"}],blocking_rules:["l.first_name = r.first_name","l.surname = r.surname","l.dob = r.dob"],link_type:"dedupe_only",additional_columns_to_retain:["group"]}}},w=n(318),D=n.n(w),C=n(319),M=n.n(C),N=n(320),A=M.a,L=new D.a(A);L.injectStyles(),Object(N.a)(L);var S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={option_selection:"id_1"},n.handleChange=function(e){var t=e.target.value;n.setState({option_selection:t})},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getTextFromId",value:function(e){var t=x[e].settings_dictionary;return JSON.stringify(t,null,4)}},{key:"render",value:function(){var e=this.getTextFromId(this.state.option_selection);return r.a.createElement("div",{className:"App-main-div"},r.a.createElement(k,null),r.a.createElement(v,{onChange:this.handleChange,all_example_settings:x,selected_option:this.state.option_selection}),r.a.createElement("div",{className:"App-flex-container"},r.a.createElement("div",{className:"App-flex-item"},r.a.createElement("h2",null,"Code editor"),r.a.createElement(_,{editor_contents_string:e,option_selection:this.state.option_selection})),r.a.createElement("div",{className:"App-flex-item"},r.a.createElement(O,{select_id:this.state.option_selection}))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[322,2,3]]]);
//# sourceMappingURL=main.d13626a1.chunk.js.map